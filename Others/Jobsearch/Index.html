<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Plant Visit Planner â€“ Dark</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <style>
    :root{
      --bg:#05070d; --bg-card:#151a24; --bg-card-soft:#1b2230;
      --border-soft:#252b3a; --accent:#59b5ff; --accent-soft:rgba(89,181,255,.15);
      --text-main:#f5f7ff; --text-muted:#9aa4c0;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#151a24 0,#05070d 45%,#020308 100%);
      color:var(--text-main);
    }
    .page{max-width:1400px;margin:0 auto;padding:.75rem}
    h1{
      margin:0 0 .75rem;
      font-size:1.1rem; letter-spacing:.04em; text-transform:uppercase;
      color:var(--text-muted); display:flex; justify-content:space-between; align-items:center;
      gap:.75rem; flex-wrap:wrap;
    }
    .main-card{
      background:var(--bg-card);
      border-radius:16px;
      border:1px solid var(--border-soft);
      box-shadow:0 16px 40px rgba(0,0,0,.5);
      padding:.75rem;
    }
    .card-inner{
      background:var(--bg-card-soft);
      border-radius:12px;
      border:1px solid var(--border-soft);
      padding:.75rem;
      width:100%;
      display:flex;
      flex-direction:column;
      height:calc(100vh - 120px);
    }
    .card-title{
      font-size:.9rem; text-transform:uppercase; letter-spacing:.08em;
      color:var(--text-muted); margin-bottom:.35rem;
    }
    .subline{font-size:.78rem;color:var(--text-muted);margin-bottom:.6rem;line-height:1.35}

    .controls{
      display:flex; justify-content:space-between; align-items:center;
      gap:.5rem; margin-bottom:.65rem; flex-wrap:wrap;
    }
    .controls-left{display:flex;gap:.45rem;align-items:center;flex-wrap:wrap}

    .btn{
      border-radius:999px;
      border:1px solid var(--border-soft);
      background:#0f131d;
      padding:.25rem .7rem;
      color:var(--text-muted);
      font-size:.78rem;
      cursor:pointer;
      transition:all .2s;
      user-select:none;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      white-space:nowrap;
    }
    .btn:hover{border-color:var(--accent);color:var(--accent)}
    .btn-primary{border-color:var(--accent);color:var(--accent);background:rgba(89,181,255,.05)}
    .btn:disabled{opacity:.45;cursor:not-allowed}

    .stats{font-size:.8rem;color:var(--text-muted)}
    .stats b{color:var(--accent)}

    /* Search */
    .search-wrap{
      display:flex; align-items:center; gap:.45rem;
      background:#0f131d;
      border:1px solid var(--border-soft);
      border-radius:999px;
      padding:.25rem .6rem;
      min-width:min(520px, 92vw);
    }
    .search-wrap:focus-within{ border-color: var(--accent); }
    .search-icon{ color: var(--text-muted); font-size: .85rem; }
    .search{
      flex:1 1 auto;
      border:0;
      outline:0;
      background:transparent;
      color:var(--text-main);
      font-size:.82rem;
      padding:.1rem .2rem;
    }
    .search::placeholder{ color: #7f8ab0; }
    .btn-clear{
      border:0;
      background:transparent;
      color:var(--text-muted);
      cursor:pointer;
      font-size:.85rem;
      padding:.15rem .25rem;
      border-radius:8px;
    }
    .btn-clear:hover{ color: var(--accent); background: rgba(89,181,255,.06); }

    .list{flex:1 1 auto;overflow-y:auto;padding-right:.25rem}

    .stop-row{
      display:flex; align-items:flex-start; gap:.55rem;
      padding:.55rem .45rem; margin-bottom:.2rem;
      border-radius:12px; cursor:pointer;
      border:1px solid transparent; transition:all .15s;
    }
    .stop-row:hover{background:#202738}
    .stop-row.selected{background:var(--accent-soft);border-color:var(--accent);transform:translateY(-1px)}
    .stop-row.visited{background:rgba(20,80,40,.30);opacity:.85}
    .stop-row.visited .company-name-main{ text-decoration:line-through; color:var(--text-muted); }

    .stop-number{
      width:30px;height:30px;border-radius:50%;background:#0d111c;
      display:flex;align-items:center;justify-content:center;
      font-size:.75rem;color:var(--accent);flex-shrink:0;margin-top:.1rem;
    }

    .company-block{flex:1 1 auto; min-width: 240px;}
    .company-name{font-size:.88rem;line-height:1.25;}
    .company-name-main{display:block;font-weight:650}
    .company-area{display:block;margin-top:.2rem;font-size:.75rem;color:var(--text-muted);line-height:1.35}
    .row-actions{margin-top:.45rem;display:flex;gap:.35rem;flex-wrap:wrap}

    .checkbox-wrap{flex-shrink:0;margin-top:.15rem}
    .checkbox-wrap input[type="checkbox"]{width:18px;height:18px;accent-color:var(--accent);cursor:pointer}

    .list::-webkit-scrollbar{width:6px}
    .list::-webkit-scrollbar-track{background:transparent}
    .list::-webkit-scrollbar-thumb{background:#343c4f;border-radius:3px}

    @media (max-width: 960px){
      .card-inner{height:78vh}
      .search-wrap{min-width: 92vw;}
    }
  </style>
</head>
<body>
  <div class="page">
    <h1>
      Resume & Job Application Planner - <a href="../../index.html" class="nav-card card">        <h3 class="nav-title">Home</h3>
          </a>

      <span class="stats" id="stats"></span>
    </h1>

    <div class="main-card">
      <div class="card-inner">
        <div class="card-title">Company List</div>
        <div class="subline">
          Search by company name or address. Tap a row to highlight. Use <b>Open Directions</b> to launch Google Maps (Maps will use your current location).
        </div>

        <div class="controls">
          <div class="controls-left">
            <div class="search-wrap">
              <span class="search-icon">ðŸ”Ž</span>
              <input id="searchInput" class="search" type="text" placeholder="Search company or address..." />
              <button id="clearSearch" class="btn-clear" title="Clear">âœ•</button>
            </div>
            <button id="clearVisited" class="btn">Reset Visited</button>
          </div>

          <div class="stats" id="hint"></div>
        </div>

        <div class="list" id="plantList"></div>
      </div>
    </div>
  </div>

<script>
  // --- FULL LIST (NO LAT/LNG) ---
  const plants = [
    { id: "aureumaex", order: 1, name: "Aureumaex Precision Plastics (M) Sdn Bhd", area: "Lot 136, Jalan Permata 1, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "ichikoh", order: 2, name: "Ichikoh (M) Sdn. Bhd.", area: "Lot 110, Jalan Permata 1/4, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "ouji_sekken", order: 3, name: "Ouji Sekken Manufacturing (M) Sdn. Bhd.", area: "Lot 759(B3), Nilai Industrial Estate, 71800 Nilai, Negeri Sembilan" },
    { id: "alps_electric", order: 4, name: "Alps Electric (Malaysia) Sdn Bhd - Nilai Plant", area: "Lot 109, Jalan Permata 1/4, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "k_plastics", order: 5, name: "K-Plastics Industries Sdn Bhd", area: "Lot 24, Jalan Permata 1/2, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "pca_group", order: 6, name: "PCA Group Sdn Bhd", area: "Lot 50, Jalan Permata 2, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "johnson_matthey", order: 7, name: "Johnson Matthey Sdn. Bhd.", area: "Lot 12, Jalan 2, Kawasan Perindustrian Nilai 3, 71800 Nilai, Negeri Sembilan" },
    { id: "meditech_gloves", order: 8, name: "Meditech Gloves Sdn. Bhd.", area: "Lot 23, Jalan Seriemas 1, Kota Seriemas, 71800 Nilai, Negeri Sembilan" },
    { id: "future_plastic", order: 9, name: "Future Plastic Industries Sdn. Bhd.", area: "Lot 1608, Jalan Nilai 3/10, Kawasan Perindustrian Nilai 3, 71800 Nilai, Negeri Sembilan" },
    { id: "jujutsu_industries", order: 10, name: "Jujutsu Industries Sdn Bhd", area: "Lot 83, Jalan Permata 2/3, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "polyplus_packages", order: 11, name: "Polyplus Packages Sdn. Bhd.", area: "Lot 18, Jalan Permata 1/1, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "jebsen_jessen", order: 12, name: "Jebsen & Jessen Packaging Sdn Bhd", area: "Lot 3297, Jalan Permata 2/1, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "lti_industries", order: 13, name: "LTI Industries Sdn Bhd", area: "Lot 16, Jalan Permata 1, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "harta_packaging", order: 14, name: "Harta Packaging Industries (Selangor) Sdn. Bhd.", area: "Lot 6, Jalan Permata 2, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "skf_bearing", order: 15, name: "SKF Bearing Industries (M) Sdn Bhd", area: "Lot 79, Jalan Permata 2, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "akzo_nobel", order: 16, name: "Akzo Nobel Paints (Malaysia) Sdn Bhd", area: "Lot 5827, Jalan Permata 1, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "mapei_nilai", order: 17, name: "Mapei Malaysia Nilai Plant", area: "D3A, Lot 28, Jalan Industri 3/4, Kawasan Perindustrian Nilai 3, 71800 Nilai, Negeri Sembilan" },
    { id: "gf_one", order: 18, name: "GF One Chemicals Sdn. Bhd.", area: "Lot 12A, Jalan Nilai 3/7, Kawasan Perindustrian Nilai 3, 71800 Nilai, Negeri Sembilan" },
    { id: "dansoon", order: 19, name: "Dansoon Chemicals Sdn. Bhd.", area: "No. 5, Jalan Nilai 3/8, Kawasan Perindustrian Nilai 3, 71800 Nilai, Negeri Sembilan" },
    { id: "chuanplus", order: 20, name: "Chuanplus Industries Sdn. Bhd.", area: "Lot 27, Jalan Nilai 3/1, Kawasan Perindustrian Nilai 3, 71800 Nilai, Negeri Sembilan" },
    { id: "av_manufacturing", order: 21, name: "AV Manufacturing Sdn. Bhd.", area: "Lot 19, Jalan Nilai 3/5, Kawasan Perindustrian Nilai 3, 71800 Nilai, Negeri Sembilan" },
    { id: "yec_chemical", order: 22, name: "YEC Chemical Compounds Sdn Bhd", area: "No. 16, Jalan Nilai 3/2, Kawasan Perindustrian Nilai 3, 71800 Nilai, Negeri Sembilan" },
    { id: "vivasil_paints", order: 23, name: "Vivasil Paints ( M ) Sdn Bhd", area: "No. 38, Jalan KIP 2, Taman Perindustrian KIP, 52200 Kuala Lumpur / Nilai 3 Ops" },
    { id: "dongnam", order: 24, name: "Dongnam Sdn. Bhd.", area: "Lot 106, Jalan Permata 1/4, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "see_sen", order: 25, name: "See Sen Chemical Berhad", area: "Lot 82, Jalan Permata 1, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "cenviro", order: 26, name: "Cenviro Sdn Bhd", area: "Ladang Tanah Merah A3 Division, Bukit Pelanduk, 71900 Port Dickson, Negeri Sembilan" },
    { id: "schmidt_clemens", order: 27, name: "Schmidt + Clemens (Asia) Sdn. Bhd.", area: "Lot 1928, Jalan Sendayan, Kawasan Perindustrian Sendayan, 71950 Seremban, Negeri Sembilan" },
    { id: "jaewon_frontier", order: 28, name: "Jaewon Frontier (M) Sdn Bhd", area: "Lot 55, Jalan Permata 2, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "tecford_precision", order: 29, name: "Tecford Precision Sdn Bhd", area: "Lot 138, Jalan Permata 1, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "fibertex", order: 30, name: "Fibertex Personal Care Sdn. Bhd.", area: "Lot 72, Jalan Permata 2, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "sugihara_grand", order: 31, name: "Sugihara Grand Industries (Sendayan Plant) Sdn Bhd", area: "Lot 11, Jalan Tech Valley 1, Sendayan Tech Valley, 71950 Seremban, Negeri Sembilan" },
    { id: "bluetech_env", order: 32, name: "Bluetech Environmental Technology Sdn Bhd", area: "No. 12, Jalan Toman 2, Kemayan Square, 70200 Seremban, Negeri Sembilan" },
    { id: "cbt_petroleum", order: 33, name: "CBT Petroleum Sdn Bhd", area: "Lot 3835, Jalan Labu, Batu 3 1/2, 70200 Seremban, Negeri Sembilan" },
    { id: "goodmaid", order: 34, name: "Goodmaid Chemicals Corporation Sdn Bhd", area: "Lot 27B, Lorong Bunga Tanjung 3/1, Senawang Industrial Park, 70400 Seremban, Negeri Sembilan" },
    { id: "ansell_seremban", order: 35, name: "Ansell Seremban Sdn Bhd", area: "Lot 80, Air Hitam Industrial Estate, 72120 Jempol, Negeri Sembilan" },
    { id: "toyochem_seremban", order: 36, name: "Toyochem Specialty Chemicals Sdn Bhd", area: "Lot 29, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "aica_malaysia", order: 37, name: "Aica Malaysia Sdn. Bhd.", area: "Lot 38, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "sumitomo_env", order: 38, name: "Sumitomo Chemical Enviro-Agro Asia Pacific Sdn. Bhd.", area: "Lot 60, Jalan Senawang 3, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "careplus", order: 39, name: "Careplus (M) Sdn Bhd", area: "Lot 17479, Lorong Senawang 3/2, Kawasan Perindustrian Senawang, 70450 Seremban, Negeri Sembilan" },
    { id: "bostik", order: 40, name: "Bostik Malaysia Sdn Bhd", area: "Lot 22, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "aegis_materials", order: 41, name: "Aegis Materials (M) Sdn. Bhd.", area: "Lot 45, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "sun_rubber", order: 42, name: "Sun Rubber Industry Sdn. Bhd.", area: "Lot 68, Jalan Senawang 3, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "conquest_chem", order: 43, name: "Conquest Chemical Supply Sdn. Bhd.", area: "No. 49, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "ogosin_chem", order: 44, name: "Ogosin Chemical Industries Sdn. Bhd.", area: "No. 11, Jalan Lombong Emas 4, Seremban Light Industrial Park, 70200 Seremban, Negeri Sembilan" },
    { id: "allied_specialty", order: 45, name: "Allied Specialty Compounds", area: "Lot 26, Jalan Senawang 3, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "ecogreen_monomer", order: 46, name: "Ecogreen Monomer Sdn Bhd", area: "Lot 23, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "sanyu_jushi", order: 47, name: "Sanyu Jushi Sdn. Bhd.", area: "Lot 18, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "gb_industries", order: 48, name: "G.B. Industries Sdn Bhd", area: "Lot 72, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "maytech", order: 49, name: "Maytech Cleanroom Manufacturing Sdn Bhd", area: "Lot 25, Jalan Senawang 3, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "growchem_senawang", order: 50, name: "Growchem Sdn Bhd", area: "Lot 15, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "cp_chemie", order: 51, name: "Cp Chemie Resources (M) Sdn Bhd", area: "Lot 33, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "ccp_century", order: 52, name: "Ccp Century Chemical Paints & Hardware Trading S.B", area: "No. 12, Jalan SS 13/3E, Subang Jaya Industrial Estate, 47500 Subang Jaya, Selangor" },
    { id: "m_xell", order: 53, name: "M-Xell Chemicals Sdn Bhd", area: "No. 58, Jalan Senawang 3, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "goldstab", order: 54, name: "Goldstab Additives Sdn Bhd", area: "Lot 21, Jalan Senawang 4, Senawang Industrial Estate, 70450 Seremban, Negeri Sembilan" },
    { id: "zhe_ma", order: 55, name: "Zhe Ma Advance Material Technology Sdn. Bhd.", area: "Lot 108, Jalan Permata 1/4, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "dia_chemical", order: 56, name: "Dia-Chemical Sdn. Bhd.", area: "No. 12, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "asachem_sa", order: 57, name: "Asachem (M) Sdn. Bhd.", area: "Lot 10, Jalan Lada Sulah 16/11, Seksyen 16, 40200 Shah Alam, Selangor" },
    { id: "inventec", order: 58, name: "Inventec Performance Chemicals South East Asia Sdn Bhd", area: "Lot 10, Jalan Permata 2, Arab Malaysian Industrial Park, 71800 Nilai, Negeri Sembilan" },
    { id: "bt_chemicals", order: 59, name: "BT Chemicals Sdn Bhd", area: "No. 8, Jalan TP 5A, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "pro_chem", order: 60, name: "Pro-Chem Industrial Sdn Bhd", area: "No. 6, Jalan TPP 6/6, Taman Perindustrian Puchong, 47100 Puchong, Selangor" },
    { id: "helios_chem", order: 61, name: "Helios Chemicals Sdn Bhd", area: "No. 9, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "cyto_tech", order: 62, name: "Cyto Tech Sdn Bhd", area: "No. 15, Jalan TPP 1/1, Taman Perindustrian Puchong, 47100 Puchong, Selangor" },
    { id: "hexachem", order: 63, name: "Hexachem (M) Sdn. Bhd.", area: "No. 22, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "tech_lab", order: 64, name: "Tech-Lab Manufacturing Sdn Bhd", area: "No. 48, Jalan TPP 5, Taman Perindustrian Putra, 47130 Puchong, Selangor" },
    { id: "qemrich", order: 65, name: "Qemrich Sdn Bhd", area: "No. 2, Jalan TP 5, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "kraiburg_tpe", order: 66, name: "KRAIBURG TPE Technology (M) Sdn Bhd", area: "Lot 1839, Jalan KPB 6, Kawasan Perindustrian Balakong, 43300 Seri Kembangan, Selangor" },
    { id: "leivy", order: 67, name: "Leivy Laboratories Sdn. Bhd", area: "No. 9, Jalan KPB 5, Kawasan Perindustrian Balakong, 43300 Seri Kembangan, Selangor" },
    { id: "guppy_plastic", order: 68, name: "Guppy Plastic Industries Sdn Bhd", area: "Lot 19, Jalan KPB 3, Kawasan Perindustrian Balakong, 43300 Seri Kembangan, Selangor" },
    { id: "miracon", order: 69, name: "Miracon (M) Sdn Bhd", area: "No. 20, Jalan KPB 11, Kawasan Perindustrian Balakong, 43300 Seri Kembangan, Selangor" },
    { id: "imec_hygiene", order: 70, name: "iMEC Hygiene Sdn. Bhd.", area: "No. 36, Jalan Kajang Jaya 7, Taman Kajang Jaya, 43000 Kajang, Selangor" },
    { id: "ysp_industries", order: 71, name: "Y.S.P Industries (M) Sdn Bhd", area: "Lot 3, 5 & 7, Jalan P/7, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "duopharma", order: 72, name: "Duopharma Manufacturing (Bangi) Sdn Bhd", area: "Lot 2, 4, 6, 8 & 10, Jalan P/7, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "etika_beverages", order: 73, name: "Etika Beverages Sdn Bhd", area: "Lot 5, Jalan P/13, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "texchem_life", order: 74, name: "Texchem Life Science Sdn Bhd", area: "No. 5, Jalan P/1, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "denso", order: 75, name: "Denso (M) Sdn Bhd", area: "Lot 2, Jalan P/1, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "ccm_polymers", order: 76, name: "Ccm Polymers Sdn Bhd", area: "Lot 3, Jalan P/10, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "compounding_colouring", order: 77, name: "Compounding & Colouring Sdn Bhd", area: "Lot 1, Jalan P/10, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "stenta_films", order: 78, name: "Stenta Films (M) Sdn Bhd", area: "Lot 8, Jalan P/10, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "tesa_tapes", order: 79, name: "Tesa Tapes (M) Sdn Bhd", area: "Lot 7, Jalan P/5, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "sapura_industrial", order: 80, name: "Sapura Industrial Berhad", area: "Lot 2 & 4, Jalan P/11, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "pharmaniaga", order: 81, name: "Pharmaniaga Manufacturing Bhd", area: "Lot 7, Jalan P/7, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "mlm_packaging", order: 82, name: "Mlm Packaging Sdn Bhd", area: "No. 5, Jalan TP 2, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "alsey_kimia", order: 83, name: "Alsey Kimia (M) Sdn Bhd", area: "No. 12, Jalan TP 5, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "ichem_solution", order: 84, name: "i-Chem Solution Sdn Bhd", area: "No. 2, Jalan TPP 5, Taman Perindustrian Putra, 47130 Puchong, Selangor" },
    { id: "chembond", order: 85, name: "Chembond Chemicals(Malaysia) Sdn Bhd", area: "No. 15, Jalan Utarid U5/15, Seksyen U5, 40150 Shah Alam, Selangor" },
    { id: "hb_laboratories", order: 86, name: "HB Laboratories Sdn Bhd", area: "No. 8, Jalan Utarid U5/26, Seksyen U5, 40150 Shah Alam, Selangor" },
    { id: "ferrovic", order: 87, name: "Ferrovic Corporation (M) Sdn. Bhd.", area: "No. 18, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "pavilion_coating", order: 88, name: "Pavilion Coating (M) Sdn Bhd", area: "No. 6, Jalan TP 5, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "edenor_oleo", order: 89, name: "Edenor Oleochemicals (M) Sdn Bhd", area: "Lot 1, Jalan Lebuh Raya, Pelabuhan Klang, 42000 Port Klang, Selangor" },
    { id: "primechem", order: 90, name: "Primechem Malaysia Sdn Bhd", area: "No. 5, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "unigreen", order: 91, name: "Unigreen Chemicals Sdn. Bhd.", area: "Lot 12, Jalan Sultan Mohamed 6, Kawasan Perindustrian Bandar Sultan Suleiman, 42000 Port Klang, Selangor" },
    { id: "synerchem", order: 92, name: "Synerchem Group", area: "No. 2, Jalan Anggerik Mokara 31/48, Kota Kemuning, 40460 Shah Alam, Selangor" },
    { id: "bio_enviro", order: 93, name: "Bio Enviro Industries Sdn Bhd", area: "No. 8, Jalan TP 3, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "cb_palm", order: 94, name: "Cb Palm Industrial Sdn. Bhd.", area: "Lot 15, Jalan Ikan Bawal 2, Telok Gong, 42000 Port Klang, Selangor" },
    { id: "plantic_lab", order: 95, name: "Plantic Lab Sdn Bhd", area: "No. 12, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "mildef", order: 96, name: "Mildef International Technologies Sdn Bhd", area: "Lot 26, Jalan 6, Kawasan Perindustrian Cheras Jaya, 43200 Balakong, Selangor" },
    { id: "techbond", order: 97, name: "Techbond Manufacturing Sdn Bhd", area: "No. 10, Jalan U1/20, Hicom Glenmarie Industrial Park, 40150 Shah Alam, Selangor" },
    { id: "wasco_thermal", order: 98, name: "Wasco Thermal Sdn. Bhd", area: "Lot 9, Jalan Kemajuan, Seksyen 16, 40200 Shah Alam, Selangor" },
    { id: "hicom_diecastings", order: 99, name: "Hicom Diecastings Sdn Bhd", area: "Lot 16, Jalan Pahat 16/8A, Seksyen 16, 40200 Shah Alam, Selangor" },
    { id: "mettube", order: 100, name: "Mettube Sdn Bhd", area: "Lot 5, Jalan Pahat 16/8A, Seksyen 16, 40200 Shah Alam, Selangor" },
    { id: "afcona", order: 101, name: "Afcona Chemicals Sdn Bhd", area: "Lot 3, Jalan Anggerik Mokara 31/64, Kota Kemuning, 40460 Shah Alam, Selangor" },
    { id: "apex_packaging", order: 102, name: "Apex Packaging Sdn Bhd", area: "Lot 888, Jalan Subang 9, Taman Perindustrian Subang, 47620 Subang Jaya, Selangor" },
    { id: "shintako", order: 103, name: "Shintako (M) Sdn Bhd", area: "Lot 18, Jalan Lada Sulah 16/11, Seksyen 16, 40200 Shah Alam, Selangor" },
    { id: "kaizen_packaging", order: 104, name: "Kaizen Packaging Sdn Bhd", area: "No. 2, Jalan TP 3, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "nichia_malaysia", order: 105, name: "Nichia (Malaysia) Sdn Bhd", area: "Lot 10, Jalan P/10, Section 13, Kawasan Perindustrian Bangi, 43650 Bandar Baru Bangi, Selangor" },
    { id: "igl_coatings", order: 106, name: "Igl Coatings Headquarters", area: "No. 10, Jalan Astaka U8/82, Bukit Jelutong, 40150 Shah Alam, Selangor" },
    { id: "jj_asia", order: 107, name: "Jj Asia Manufacturing (M) Sdn Bhd", area: "Lot 5, Jalan Anggerik Mokara 31/54, Kota Kemuning, 40460 Shah Alam, Selangor" },
    { id: "mre_group", order: 108, name: "Mre Group Of Companies", area: "No. 15, Jalan Anggerik Mokara 31/48, Kota Kemuning, 40460 Shah Alam, Selangor" },
    { id: "suka_chemicals", order: 109, name: "Suka Chemicals (M) Sdn Bhd", area: "Lot 1115, Jalan Subang 10, Taman Perindustrian Subang, 47620 Subang Jaya, Selangor" },
    { id: "fnholdings", order: 110, name: "Fraser & Neave Holdings Bhd", area: "1, Jalan Bukit Belimbing 26/38, Persiaran Kuala Selangor, Seksyen 26, 40400 Shah Alam, Selangor" },
    { id: "malaysian_diecast", order: 111, name: "Malaysian Die-Casting Industries Sdn. Bhd.", area: "Lot 6, Jalan Pahat 16/8A, Seksyen 16, 40200 Shah Alam, Selangor" },
    { id: "globechem", order: 112, name: "Globechem Sdn Bhd", area: "No. 9, Jalan TP 5, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "finn_chem", order: 113, name: "Finn Chemicals Sdn. Bhd.", area: "No. 3, Jalan TPP 1, Taman Perindustrian Putra, 47130 Puchong, Selangor" },
    { id: "japan_chemical", order: 114, name: "Japan Chemical (M) Sdn Bhd", area: "Lot 7, Jalan Lebuh Raya, Pelabuhan Klang, 42000 Port Klang, Selangor" },
    { id: "gme_chemicals", order: 115, name: "Gme Chemicals (M) Sdn Bhd", area: "No. 8, Jalan TP 2, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "malayan_adhesives", order: 116, name: "Malayan Adhesives And Chemicals Sdn Bhd", area: "No. 9, Jalan Utas 15/7, Seksyen 15, 40200 Shah Alam, Selangor" },
    { id: "krischem", order: 117, name: "Krischem Sdn. Bhd.", area: "No. 12, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "arobenz", order: 118, name: "Arobenz Chemicals Sdn Bhd", area: "No. 6, Jalan TPP 5, Taman Perindustrian Putra, 47130 Puchong, Selangor" },
    { id: "ken_rich", order: 119, name: "Ken-Rich Chemical Sdn Bhd.", area: "No. 2, Jalan TP 3, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "dpi_chemicals", order: 120, name: "Dpi Chemicals Sdn Bhd", area: "No. 15, Jalan TP 5, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "archem", order: 121, name: "Archem Malaysia Sdn Bhd", area: "Lot 22, Jalan Ikan Bawal 2, Telok Gong, 42000 Port Klang, Selangor" },
    { id: "gladron", order: 122, name: "Gladron Chemicals Sdn. Bhd.", area: "No. 5, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "clariant", order: 123, name: "Clariant (Malaysia) Sdn Bhd", area: "Lot 1, Jalan Lebuh Raya, Pelabuhan Klang, 42000 Port Klang, Selangor" },
    { id: "zextron", order: 124, name: "Zextron Chemical Industries (M) Sdn Bhd", area: "No. 18, Jalan TPP 1, Taman Perindustrian Putra, 47130 Puchong, Selangor" },
    { id: "fujikura", order: 125, name: "Fujikura Chemicals Sdn Bhd", area: "Lot 9, Jalan Anggerik Mokara 31/54, Kota Kemuning, 40460 Shah Alam, Selangor" },
    { id: "jintai", order: 126, name: "Jintai (M) Sdn Bhd", area: "Lot 5, Jalan Ikan Bawal 2, Telok Gong, 42000 Port Klang, Selangor" },
    { id: "tmk_chemical", order: 127, name: "Tmk Chemical Banting Sdn Bhd", area: "Lot 36, Jalan Cempaka 2, Kawasan Perindustrian Telok Panglima Garang, 42500 Telok Panglima Garang, Selangor" },
    { id: "kc_chemicals", order: 128, name: "KC Chemicals (M) Sdn Bhd", area: "No. 2, Jalan TP 5, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "sunenergy", order: 129, name: "Sunenergy Chemical & Pharmaceutical Sdn Bhd", area: "No. 8, Jalan TP 3, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "ccm_berhad", order: 130, name: "Chemical Company Of Malaysia Berhad", area: "No. 1, Jalan Utas 15/7, Seksyen 15, 40200 Shah Alam, Selangor" },
    { id: "olen_port", order: 131, name: "Olen Port Klang Sdn Bhd", area: "Lot 12, Jalan Lebuh Raya, Pelabuhan Klang, 42000 Port Klang, Selangor" },
    { id: "mey_chern", order: 132, name: "Mey Chern Chemical Sdn Bhd", area: "Lot 5, Jalan Sultan Mohamed 6, Kawasan Perindustrian Bandar Sultan Suleiman, 42000 Port Klang, Selangor" },
    { id: "acme_chemicals", order: 133, name: "Acme Chemicals (M) Sdn Bhd", area: "Lot 18, Jalan Solok Sultan Hishamuddin 6, Kawasan Perusahaan Selat Klang Utara, 42000 Port Klang, Selangor" },
    { id: "nylex_specialty", order: 134, name: "Nylex Specialty Chemicals Sdn. Bhd.", area: "Lot 593, Persiaran Raja Lumu, Kawasan Perusahaan Pandamaran, 42000 Port Klang, Selangor" },
    { id: "nexuschem", order: 135, name: "Nexuschem Engineering Sdn Bhd", area: "No. 12, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "govi_chemicals", order: 136, name: "GOVI Chemicals Sdn. Bhd", area: "Lot 18, Jalan Ikan Bawal 2, Telok Gong, 42000 Port Klang, Selangor" },
    { id: "mitsui_poly", order: 137, name: "Mitsui Chemicals Polyurethanes Malaysia Sdn. Bhd.", area: "Lot 20, Jalan Anggerik Mokara 31/54, Kota Kemuning, 40460 Shah Alam, Selangor" },
    { id: "lyondellbasell", order: 138, name: "Lyondellbasell Polymers (Malaysia) Sdn. Bhd.", area: "No. 15, Jalan TP 5, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "zagro_chem", order: 139, name: "Zagro Chemicals Sdn. Bhd.", area: "No. 18, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "southern_acids", order: 140, name: "Southern Acids Industries Sdn. Bhd.", area: "Golconda Estate, Persiaran Hamzah Alang, 42200 Kapar, Selangor" },
    { id: "klh_telok", order: 141, name: "Kong Long Huat Chemicals Sdn Bhd Telok Gong", area: "Lot 23, Jalan Ikan Mata Duyung, Telok Gong, 42000 Port Klang, Selangor" },
    { id: "pkg_gemilang", order: 142, name: "Perusahaan Kimia Gemilang Sdn. Bhd.", area: "Lot 9, Jalan TUDM, Kampung Baru Subang, 40150 Shah Alam, Selangor" },
    { id: "formosa_prosonic", order: 143, name: "Formosa Prosonic Chemicals Sdn Bhd", area: "Lot 12, Jalan Sultan Mohamed 6, Kawasan Perindustrian Bandar Sultan Suleiman, 42000 Port Klang, Selangor" },
    { id: "w_clay", order: 144, name: "The W Clay Industries Sdn. Bhd.", area: "Lot 38, Jalan Ikan Bawal 2, Telok Gong, 42000 Port Klang, Selangor" },
    { id: "synergy_chem", order: 145, name: "Synergy Chemicals Sdn Bhd", area: "No. 5, Jalan TP 6, Taman Perindustrian Sime UEP, 47600 Subang Jaya, Selangor" },
    { id: "ksc_chem", order: 146, name: "Ksc Chemical (Malaysia) Sdn. Bhd.", area: "Lot 9, Jalan Anggerik Mokara 31/54, Kota Kemuning, 40460 Shah Alam, Selangor" },
    { id: "tg_chem", order: 147, name: "Tg Chemical (M) Sdn Bhd", area: "Lot 18, Jalan Ikan Bawal 2, Telok Gong, 42000 Port Klang, Selangor" },
    { id: "mah_sing", order: 148, name: "Mah Sing Plastics Industries Sdn Bhd", area: "Lot 8, Jalan Pandan, Pandan Indah, 55100 Kuala Lumpur" },
    { id: "growchem_pi", order: 149, name: "Growchem Sdn Bhd (Pulau Indah Plant)", area: "Lot 22, Jalan Perigi Nanas 8/1, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "yara_industrial", order: 150, name: "Yara International (M)Sdn Bhd - Industrial", area: "Lot 1, Jalan Perigi Nanas 7/1, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "mewah_oils", order: 151, name: "Mewah Oils Sdn Bhd", area: "Lot 40, Section 4, Jalan Perigi Nanas 8/1, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "mitsui_scientex", order: 152, name: "Mitsui Chemicals Scientex Sdn. Bhd.", area: "Lot 12, Jalan Ikan Bawal 2, Telok Gong, 42000 Port Klang, Selangor" },
    { id: "hextar", order: 153, name: "Hextar Chemicals Sdn Bhd", area: "Lot 5, Jalan Perigi Nanas 7/3, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "ascendchem", order: 154, name: "Ascendchem Sdn Bhd Pulau Indah", area: "Lot 3, Jalan Perigi Nanas 7/2, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "topmark", order: 155, name: "Topmark Petroleum Products Sdn. Bhd.", area: "Lot 16, Jalan Perigi Nanas 8/1, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "cargill", order: 156, name: "Cargill Palm Products Sdn Bhd", area: "Lot 220, Jalan Timah 2, Kawasan Perindustrian Pasir Gudang (Ref Pulau Indah Plant)" },
    { id: "chevron_pi", order: 157, name: "Chevron Pulau Indah Terminal", area: "Lot 15, Jalan Perigi Nanas 8/1, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "concord_chem", order: 158, name: "Concord Chemicals Corporation Sdn. Bhd.", area: "Lot 19, Jalan Perigi Nanas 7/1, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "adhes_packaging", order: 159, name: "Adhes Packaging Technology (Malaysia) Sdn Bhd", area: "Lot 5, Jalan Perigi Nanas 7/3, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "klk_oleomas", order: 160, name: "Kl-Kepong Oleomas Sdn. Bhd.", area: "Lot 1, Jalan Perigi Nanas 8/1, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "gamalux", order: 161, name: "Gamalux Sdn Bhd (Factory)", area: "Lot 6, Jalan Perigi Nanas 7/2, Kawasan Perindustrian Pulau Indah, 42920 Pulau Indah, Selangor" },
    { id: "ancom_nylex", order: 162, name: "Ancom Nylex Terminals Sdn Bhd", area: "Lot 22, Jalan Timah 2, Kawasan Perindustrian Pasir Gudang (Ref Port Klang Terminals)" },
    { id: "intco_malaysia", order: 163, name: "Intco Malaysia Sdn Bhd", area: "Lot 1, Jalan Timah 2, Kawasan Perindustrian Pasir Gudang (Ref Klang Plant)" },
    { id: "dh_hygiene", order: 164, name: "Dh Hygience (Melaka) Sdn Bhd", area: "Lot 12, Jalan Paya Rumput Indah 1, Taman Paya Rumput Indah, 76450 Melaka" },
    { id: "tech_latex", order: 165, name: "Tech-Latex Scientific Sdn. Bhd.", area: "Lot 8, Jalan IKS M1, Taman IKS Merdeka, 75350 Batu Berendam, Melaka" },
    { id: "yakuhin", order: 166, name: "Yakuhin Industries (M) Sdn Bhd", area: "Lot 38, Jalan Usaha 10, Kawasan Perindustrian Ayer Keroh, 75450 Ayer Keroh, Melaka" },
    { id: "air_liquide", order: 167, name: "Air Liquide Malaysia Sdn. Bhd. (Melaka Plant)", area: "Lot 3, Jalan PK 1, Kawasan Perindustrian Krubong, 75250 Melaka" }
  ];

  // --- STATE ---
  const VISITED_KEY = "plant_visit_dark_visited_v3";
  const listEl = document.getElementById("plantList");
  const statsEl = document.getElementById("stats");
  const hintEl = document.getElementById("hint");
  const searchInput = document.getElementById("searchInput");
  const clearSearchBtn = document.getElementById("clearSearch");

  let visited = {};
  let selectedId = null;
  let query = "";

  // --- INIT ---
  loadVisited();
  buildList();
  updateStats();

  // --- STORAGE ---
  function loadVisited() {
    try {
      const s = localStorage.getItem(VISITED_KEY);
      visited = s ? JSON.parse(s) : {};
    } catch { visited = {}; }
  }
  function saveVisited() {
    localStorage.setItem(VISITED_KEY, JSON.stringify(visited));
  }

  // --- MAP OPENERS (LET GOOGLE MAPS HANDLE LOCATION + DISTANCE) ---
  function buildQuery(plant) {
    return `${plant.name} ${plant.area}`.trim();
  }

  function openDirections(plant) {
    const q = encodeURIComponent(buildQuery(plant));
    const ua = navigator.userAgent || "";
    const isAndroid = /Android/i.test(ua);
    const isIOS = /iPhone|iPad|iPod/i.test(ua);

    const webUrl = `https://www.google.com/maps/dir/?api=1&destination=${q}&travelmode=driving`;

    if (isAndroid) {
      const intentUrl = `intent://maps.google.com/maps?daddr=${q}#Intent;scheme=https;package=com.google.android.apps.maps;end`;
      attemptOpen(intentUrl, webUrl);
      return;
    }

    if (isIOS) {
      const appUrl = `comgooglemaps://?daddr=${q}&directionsmode=driving`;
      attemptOpen(appUrl, webUrl);
      return;
    }

    window.open(webUrl, "_blank");
  }

  function attemptOpen(appUrl, webUrl) {
    const started = Date.now();
    window.location.href = appUrl;
    setTimeout(() => {
      if (Date.now() - started < 1500) window.open(webUrl, "_blank");
    }, 900);
  }

  // --- SEARCH / FILTER ---
  function normalize(s) {
    return (s || "").toString().toLowerCase().trim();
  }

  function getFilteredPlants() {
    const q = normalize(query);
    const base = [...plants].sort((a,b) => (a.order ?? 9999) - (b.order ?? 9999));
    if (!q) return base;

    return base.filter(p => {
      const hay = `${p.name} ${p.area}`.toLowerCase();
      return hay.includes(q);
    });
  }

  // --- UI ---
  function buildList() {
    const filtered = getFilteredPlants();
    listEl.innerHTML = "";

    if (filtered.length === 0) {
      const empty = document.createElement("div");
      empty.style.padding = "0.75rem";
      empty.style.color = "var(--text-muted)";
      empty.textContent = "No results. Try a different keyword.";
      listEl.appendChild(empty);
      updateStats(filtered.length);
      return;
    }

    filtered.forEach((plant) => {
      const row = document.createElement("div");
      row.className = "stop-row";
      if (visited[plant.id]) row.classList.add("visited");
      if (plant.id === selectedId) row.classList.add("selected");

      const num = document.createElement("div");
      num.className = "stop-number";
      num.textContent = plant.order ?? "";

      const block = document.createElement("div");
      block.className = "company-block";

      const name = document.createElement("div");
      name.className = "company-name";

      const main = document.createElement("span");
      main.className = "company-name-main";
      main.textContent = plant.name || "(No name)";
      name.appendChild(main);

      const area = document.createElement("span");
      area.className = "company-area";
      area.textContent = plant.area || "";
      name.appendChild(area);

      const actions = document.createElement("div");
      actions.className = "row-actions";

      const btnDir = document.createElement("button");
      btnDir.className = "btn btn-primary";
      btnDir.type = "button";
      btnDir.textContent = "Open Directions";
      btnDir.onclick = (e) => {
        e.stopPropagation();
        openDirections(plant);
      };

      actions.appendChild(btnDir);
      block.appendChild(name);
      block.appendChild(actions);

      const cbWrap = document.createElement("div");
      cbWrap.className = "checkbox-wrap";
      const cb = document.createElement("input");
      cb.type = "checkbox";
      cb.checked = !!visited[plant.id];
      cb.title = "Mark visited";
      cb.onclick = (e) => {
        e.stopPropagation();
        visited[plant.id] = cb.checked;
        saveVisited();
        row.classList.toggle("visited", cb.checked);
        updateStats(filtered.length);
      };
      cbWrap.appendChild(cb);

      row.appendChild(num);
      row.appendChild(block);
      row.appendChild(cbWrap);

      row.onclick = () => {
        selectedId = plant.id;
        hintEl.innerHTML = `Selected: <b style="color:var(--accent)">${escapeHtml(plant.name || "")}</b>`;
        buildList();
      };

      listEl.appendChild(row);
    });

    updateStats(filtered.length);
  }

  function updateStats(filteredCount = plants.length) {
    const done = Object.values(visited).filter(Boolean).length;
    const q = normalize(query);
    const extra = q ? ` â€¢ Showing <b>${filteredCount}</b> matches` : "";
    statsEl.innerHTML = `Visited <b>${done}</b> / <b>${plants.length}</b>${extra}`;
  }

  function escapeHtml(s) {
    return String(s)
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  // --- EVENTS ---
  document.getElementById("clearVisited").onclick = () => {
    if (confirm("Reset all visited?")) {
      visited = {};
      saveVisited();
      selectedId = null;
      hintEl.textContent = "";
      buildList();
    }
  };

  searchInput.addEventListener("input", (e) => {
    query = e.target.value || "";
    buildList();
  });

  clearSearchBtn.addEventListener("click", () => {
    query = "";
    searchInput.value = "";
    searchInput.focus();
    buildList();
  });

  // Optional: press ESC to clear search
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && document.activeElement === searchInput) {
      query = "";
      searchInput.value = "";
      buildList();
    }
  });
</script>
</body>
</html>
